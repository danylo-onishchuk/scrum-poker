(this["webpackJsonpscrum-poker"]=this["webpackJsonpscrum-poker"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r,i,c=n(4),o=n.n(c),a=n(2),s=n(1),u=n(5);!function(e){e.OpenConnection="openConnection",e.Login="login",e.StartVote="startVote",e.FinishVote="finishVote",e.ChoosedCard="choosedCard"}(r||(r={})),function(e){e.Login="login",e.Preparing="preparing",e.Game="game",e.Overview="overview"}(i||(i={}));var l=n(0),d=function(e){var t=e.startClick,n=e.finishClick,r=e.currentGameStage,c=e.allVoted;return Object(l.jsxs)("div",{className:"loginWrapper",children:[Object(l.jsx)("button",{type:"button",onClick:t,disabled:r===i.Game,children:"Start Game"}),Object(l.jsx)("button",{type:"button",onClick:n,disabled:!c,children:"Finish Game"})]})};function j(e){var t=e.loginClick;return Object(l.jsx)("div",{className:"loginWrapper",children:Object(l.jsxs)("form",{onSubmit:t,children:[Object(l.jsx)("input",{type:"text",name:"name",id:"name"}),Object(l.jsx)("button",{type:"submit",children:"Login"})]})})}n(14);var b=function(e){var t=e.clients,n=e.opacity;return Object(l.jsx)("div",{className:"tableWrapper",children:t.map((function(e){return Object(l.jsxs)("div",{className:"clientsWrapper",children:[Object(l.jsx)("div",{children:e.name}),Object(l.jsx)("div",{style:{opacity:n},children:e.points||""}),e.ready&&Object(l.jsx)("div",{children:"I choosed card!"})]},e.id)}))})},p=function(e){var t=e.voteClick;return Object(l.jsx)("div",{className:"loginWrapper",children:Object(l.jsxs)("form",{onSubmit:t,children:[Object(l.jsx)("select",{name:"points",id:"points",children:[1,2,3,5,8,13].map((function(e){return Object(l.jsx)("option",{value:e,children:e})}))}),Object(l.jsx)("button",{type:"submit",children:"Vote"})]})})},m=new u.w3cwebsocket("wss://danylo-scrum-poker.herokuapp.com");function v(){var e=Object(s.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(s.useState)(i.Login),u=Object(a.a)(o,2),v=u[0],h=u[1],O=Object(s.useState)(1),f=Object(a.a)(O,2),g=f[0],x=f[1];Object(s.useEffect)((function(){m.onopen=function(){m.send([r.OpenConnection,"open"])},m.onmessage=function(e){var t=JSON.parse(e.data),n=Object(a.a)(t,1)[0];switch(t.shift(),n){case"openFromServer":case"loginFromServer":case"choosedCardFromServer":c(t);break;case"startVoteFromServer":x(0),h(i.Game),c(t);break;case"finishVoteFromServer":x(1),h(i.Overview),c(t)}}}),[]);var k=n.map((function(e){return Number(e.points)})),C=0;k.length>0&&(C=k.reduce((function(e,t){return e+t}))/k.length);var S=n.filter((function(e){return"anonym"!==e.name})),y=S.every((function(e){return!0===e.ready}));return Object(l.jsxs)("div",{className:"gameWrapper",children:[v===i.Login&&Object(l.jsx)(j,{loginClick:function(e){e.preventDefault();var t=e.target.name.value;m.send([r.Login,t]),h(i.Preparing)}}),v===i.Game&&Object(l.jsx)(p,{voteClick:function(e){e.preventDefault();var t=e.target.points.value;m.send([r.ChoosedCard,t])}}),v!==i.Login&&Object(l.jsx)(d,{startClick:function(){m.send([r.StartVote,"startVote"])},finishClick:function(){m.send([r.FinishVote,"finishVote"])},currentGameStage:v,allVoted:y}),Object(l.jsx)(b,{clients:S,opacity:g}),Object(l.jsx)("br",{}),v===i.Overview&&Object(l.jsxs)("div",{children:["Average:",Math.round(C)]})]})}o.a.render(Object(l.jsx)(v,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.0efe3066.chunk.js.map